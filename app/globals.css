@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg: #f5f2e6;
  --card: #fdfcff;
  --surface-soft: #eef1f8;
  --text: #1c1f2b;
  --muted: #5a6275;
  --accent: #c07a1a;
  --accent-strong: #cc5c1a;
  --accent-blue: #3257a4;
  --accent-teal: #2d8d7d;
  --border-soft: rgba(28, 31, 43, 0.1);
  --border-strong: rgba(28, 31, 43, 0.18);
  --border-hover: rgba(28, 31, 43, 0.32);
  --shadow-soft: 0 14px 40px rgba(28, 31, 43, 0.08);
  --shadow-card: 0 22px 60px rgba(28, 31, 43, 0.12);
  --shadow-accent: 0 12px 32px rgba(192, 122, 26, 0.25);
  --accent-gold: var(--accent);
  --border-gold: color-mix(in srgb, var(--accent) 65%, #ffffff 35%);
  --border-gold-strong: color-mix(in srgb, var(--accent-strong) 72%, #ffffff 28%);
  --shadow-gold-soft: 0 0 18px rgba(192, 122, 26, 0.4);
  --shadow-gold-strong: 0 0 24px rgba(192, 122, 26, 0.55);
  --shadow-gold-intense: 0 0 32px rgba(192, 122, 26, 0.7);
  --shadow-gold-line: 0 0 14px rgba(192, 122, 26, 0.32);
  --glow-gold: 0 0 60px rgba(192, 122, 26, 0.26);
  --body-texture-opacity: 0.12;
  --body-texture-size: 640px 360px;
  --body-texture-image: url('/background texture.svg');
  --body-texture-color: radial-gradient(
    circle at 50% 45%,
    rgba(192, 122, 26, 0.32) 0%,
    rgba(50, 87, 164, 0.22) 32%,
    rgba(45, 141, 125, 0.18) 56%,
    transparent 82%
  );
}

@font-face {
  font-family: 'Shabnam';
  src:
    url('/fonts/Shabnam-Thin.woff2') format('woff2'),
    url('/fonts/Shabnam-Thin.woff') format('woff');
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Shabnam';
  src:
    url('/fonts/Shabnam-Light.woff2') format('woff2'),
    url('/fonts/Shabnam-Light.woff') format('woff');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Shabnam';
  src:
    url('/fonts/Shabnam.woff2') format('woff2'),
    url('/fonts/Shabnam.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Shabnam';
  src:
    url('/fonts/Shabnam-Medium.woff2') format('woff2'),
    url('/fonts/Shabnam-Medium.woff') format('woff');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Shabnam';
  src:
    url('/fonts/Shabnam-Bold.woff2') format('woff2'),
    url('/fonts/Shabnam-Bold.woff') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@layer base {
  body {
    font-family: 'Shabnam', 'Vazirmatn', 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
    background-color: var(--bg);
    background-image:
      radial-gradient(circle at 15% 20%, rgba(192, 122, 26, 0.08), transparent 35%),
      radial-gradient(circle at 85% 10%, rgba(50, 87, 164, 0.08), transparent 32%),
      radial-gradient(circle at 25% 80%, rgba(45, 141, 125, 0.08), transparent 30%),
      linear-gradient(145deg, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0));
    color: var(--text);
    min-height: 100vh;
    direction: rtl;
    position: relative;
    isolation: isolate;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    background-image: none;
    opacity: 0;
    z-index: 0;
  }
}

@layer components {
  .chat-window {
    width: min(420px, 100%);
    max-height: 90vh;
    aspect-ratio: 2 / 3;
    display: flex;
    flex-direction: column;
    border-radius: 18px;
    overflow: hidden;
    border: 2px solid var(--border-gold);
    box-shadow: var(--shadow-card);
    background: color-mix(in srgb, var(--card) 90%, #ffffff 10%);
    position: relative;
  }

  .chat-window::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: 20px;
    background: 
    radial-gradient(circle at 20% 20%, rgba(192, 122, 26, 0.18), transparent 45%),
      radial-gradient(circle at 80% 10%, rgba(50, 87, 164, 0.14), transparent 42%),
      radial-gradient(circle at 50% 85%, rgba(45, 141, 125, 0.14), transparent 44%);
    z-index: 0;
    pointer-events: none;
  }

  @media (max-width: 480px) {
    .chat-window {
      height: 75vh;
    }
  }

  .chat-shell {
    @apply flex flex-col h-full w-full relative;
    isolation: isolate;
    background: linear-gradient(
      165deg,
      rgba(255, 255, 255, 0.94) 0%,
      rgba(245, 242, 230, 0.96) 45%,
      rgba(240, 234, 218, 0.98) 100%
    );
  }

  .chat-shell::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: var(--body-texture-color);
    mask-image: var(--body-texture-image);
    mask-repeat: repeat;
    mask-size: var(--body-texture-size);
    mask-position: 0 0;
    -webkit-mask-image: var(--body-texture-image);
    -webkit-mask-repeat: repeat;
    -webkit-mask-size: var(--body-texture-size);
    -webkit-mask-position: 0 0;
    opacity: 0.24;
    filter: blur(0.5px);
    z-index: 0;
  }

  .chat-shell::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(circle at 30% 30%, rgba(192, 122, 26, 0.08), transparent 40%),
      radial-gradient(circle at 70% 20%, rgba(50, 87, 164, 0.08), transparent 36%),
      radial-gradient(circle at 60% 75%, rgba(45, 141, 125, 0.08), transparent 38%);
    opacity: 0.28;
    z-index: 0;
  }

  .chat-surface {
    background: var(--card);
    border-color: var(--border-soft);
    box-shadow: var(--shadow-card);
  }

  .chat-bubble {
    @apply rounded-2xl px-4 py-3 max-w-[92%] break-words leading-relaxed text-right;
  }

  .chat-bubble-user {
    background: linear-gradient(135deg, var(--accent), var(--accent-strong));
    color: #fdfefe;
    border: 1px solid color-mix(in srgb, var(--accent) 55%, black 8%);
    box-shadow: var(--shadow-accent);
    @apply ml-auto;
  }

  .chat-bubble-assistant {
    background: color-mix(in srgb, var(--card) 92%, #ffffff 8%);
    color: var(--text);
    border: 1px solid var(--border-strong);
    box-shadow: var(--shadow-soft);
  }

  .gold-panel {
    background: color-mix(in srgb, var(--card) 88%, #ffffff 12%);
    border: 1px solid var(--border-gold);
    box-shadow: var(--shadow-soft), var(--shadow-gold-line);
    backdrop-filter: blur(6px);
  }

  .glass-panel {
    background: color-mix(in srgb, var(--card) 75%, rgba(255, 255, 255, 0.7) 25%);
    border: 1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .gold-input {
    border: 1px solid var(--border-gold);
    box-shadow: var(--shadow-gold-line);
    background: color-mix(in srgb, #ffffff 82%, var(--card) 18%);
    transition: border-color 180ms ease, box-shadow 180ms ease, background-color 180ms ease;
  }

  .gold-input:focus {
    border-color: var(--border-gold-strong);
    box-shadow: var(--shadow-gold-strong);
    background: color-mix(in srgb, #ffffff 90%, var(--card) 10%);
  }

  .glass-overlay {
    background: rgba(255, 255, 255, 0.08);
    border-color: color-mix(in srgb, var(--border-soft) 75%, transparent 25%);
    box-shadow: 0 -8px 22px rgba(28, 31, 43, 0.06);
    backdrop-filter: blur(16px) saturate(150%);
    -webkit-backdrop-filter: blur(16px) saturate(150%);
  }

  .gold-button {
    background: linear-gradient(135deg, var(--accent), var(--accent-strong));
    border: 1px solid var(--border-gold-strong);
    box-shadow: var(--shadow-gold-strong);
    transition: transform 160ms ease, box-shadow 160ms ease, filter 160ms ease;
  }

  .gold-button:hover {
    box-shadow: var(--shadow-gold-intense);
    filter: brightness(1.02);
    transform: translateY(-1px);
  }

  .gold-button:disabled {
    box-shadow: none;
    filter: none;
    transform: none;
  }
}
